{"changed":true,"filter":false,"title":"script_test_make.js","tooltip":"/public/lib/custom/script_test_make.js","value":"var mapSize= document.getElementById(\"map_size\").value;\nvar cells = [];\nvar cells = [\n              ['e', 'e', 'e'],\n              ['e', 'e', 'e'],\n              ['e', 'e', 'e'],\n            ];\n\nvar map = {\n            name: \"\",\n            cell: \"\",\n           // user: null,\n            };\nfunction showMapFunction()\n\t{\n\t  \n\t\tdocument.getElementById(\"mapDiv\").style.visibility = \"visible\";\n\t\n     \t\t\t\t \n      \t\t\t\t\n\t}\n        \nfunction saveMapFunction(){\n  console.log(\"in save map\");\n \n    var countStartCells = 0;\n    var countFinishCells = 0;\n    var atLeastOneError = 0;\n    var errorString = \"\";\n    \n    var mapName = document.getElementById('map_name').value;\n    var cellString = \"\";\n    \n    \n    \n    for (var i = 0; i < 3; i++)\n    {\n      for (var j = 0 ; j <3; j++)\n      {\n          var string = \"select\" + (i).toString() + (j).toString();\n         \n         console.log('in for loop');\n          var element = document.getElementById(string);\n          cells[i][j] = element.options[element.selectedIndex].value;\n          //map problem\n          if(cells[i][j]==\"s\") countStartCells++;\n          else if (cells[i][j]==\"f\") countFinishCells++;\n      }\n    }\n    \n    \n    if(mapName==\"\")\n    {\n      console.log(\"no map name\");\n      errorString+=\"Cannot save map without a map name\\n\";\n      atLeastOneError = 1;\n    } \n    \n    if(countFinishCells==0)\n    {\n      errorString+=\"Need atleast 1 Finish cell.\\n\";\n      atLeastOneError = 1;\n    } \n  \n    if (countStartCells!=1)\n    {\n      errorString+=(\"Need exaclty 1 Start cell\");\n      atLeastOneError = 1;\n    }\n\n    if(atLeastOneError==1)\n    {\n      window.alert(errorString);\n      return 0;\n    }\n    else\n    {\n      for (var i = 0; i <3; i++)\n      {\n        for (var j = 0 ; j <3; j++)\n        {\n            cellString += cells[i][j];\n        }\n      }\n      \n      \n      \n      map.name = mapName;\n      map.cells = cellString;\n     // map.user = user;\n       \n      $.ajax({\n           url:\"/api/maps\",\n           method:\"post\",\n           data: map\n           \n      }).done(function(response){\n           window.alert(\"MAP SAVED SUCCESSFULLY\");\n          window.location.href = \"index\";\n      }).fail(function(response){\n           console.log(response.responseText);\n           $(\"#error\").text(JSON.parse(response.responseText).message);\n      })\n    }\n}\n","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":43,"column":9},"end":{"row":43,"column":11},"action":"remove","lines":["//"],"id":125}]]},"ace":{"folds":[],"scrolltop":1260,"scrollleft":0,"selection":{"start":{"row":81,"column":12},"end":{"row":81,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":110,"mode":"ace/mode/javascript"}},"timestamp":1535975618024}